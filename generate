#!/usr/bin/env node

const fs = require('fs')

const w = 100
const h = 13

const prefix = '<samp>'
const suffix = '</samp>'

const stars = 'âŸ¡â‹„.Â·+*..â‹†âœ§ Î‡ËšÂ·..â â ‚â â  â¡€â¢€â â ‚â â  â¡€â¢€*Â·.âœºÂ·*âŠ¹âŠ¹âŠ¹.'.split('').concat([
  'âœ¨',
])

const moon=[
  'ðŸŒ™',
]

const escapeChar = input => {
  if (input === '*') {
    return '\\*'
  }
  return input
}
const lines = []

const getRandom = source => escapeChar(source[Math.round(Math.random()*(source.length-1))])

const getStar = () => getRandom(stars)
const getMoon = () => getRandom(moon)
const moonPos = [
  Math.round(Math.random()*w),
  Math.round(Math.random()*h),
]

for (let y = 0; y < h; y++) {
  let line = ''
  for (let x = 0; x < w; x++) {
    if (moonPos[0]===x && moonPos[1]===y) {
      line = line.concat(getMoon())
      continue
    }
    line = line.concat(Math.random() < 0.08 ? getStar() : '&nbsp;')
  }
  lines.push(line)
}

let output = ''

for (let line of lines) {
  output = output.concat(line).concat('<br/>')
}

output = prefix + output + suffix

fs.writeFileSync('README.md', output)

console.log(output.replace(/&nbsp;/g, ' ').replace(/<br\/>/g, '\n'))
